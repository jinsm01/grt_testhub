import{_ as P,C as c,e as g,r as A,o as d,c as p,b as e,N as u,P as v,ab as S,t as r,B as m,f as b,d as D,w as j,F as _,y as k,O as f,z as F,G as y,A as w}from"./index-0220ec78.js";const V={name:"GeneratedTestCaseList",data(){return{isLoading:!1,tasks:[],selectedStatus:"",selectedTaskDetail:null,showAdoptModal:!1,isAdopting:!1,projects:[],projectVersions:[],allVersions:[],adoptForm:{title:"",description:"",project_id:null,priority:"low",test_type:"functional",status:"draft",preconditions:"",steps:"",expected_result:"",version_id:null},currentAdoptingTask:null,selectedTasks:[],isDeleting:!1,pagination:{currentPage:1,pageSize:10,total:0,pageSizeOptions:[10,20,50]},jumpPage:"",allStats:{total:0,completed:0,running:0,failed:0}}},computed:{availableVersions(){return this.adoptForm.project_id?this.projectVersions:this.allVersions},totalPages(){return Math.ceil(this.pagination.total/this.pagination.pageSize)},paginationInfo(){const s=(this.pagination.currentPage-1)*this.pagination.pageSize+1,t=Math.min(this.pagination.currentPage*this.pagination.pageSize,this.pagination.total);return`æ˜¾ç¤º ${s}-${t} æ¡ï¼Œå…± ${this.pagination.total} æ¡`},isAllSelected(){return this.tasks.length>0&&this.selectedTasks.length===this.tasks.length}},mounted(){this.loadTasks(),this.fetchProjects(),this.fetchAllVersions()},methods:{async loadTasks(){this.isLoading=!0;try{let s="/requirement-analysis/api/testcase-generation/";const t=new URLSearchParams;t.append("page",this.pagination.currentPage),t.append("page_size",this.pagination.pageSize),this.selectedStatus&&t.append("status",this.selectedStatus),t.toString()&&(s+="?"+t.toString());const a=await c.get(s);a.data.results?(this.tasks=a.data.results,this.pagination.total=a.data.count||0):(this.tasks=a.data||[],this.pagination.total=this.tasks.length),this.updateStats()}catch(s){console.error("åŠ è½½ä»»åŠ¡åˆ—è¡¨å¤±è´¥:",s),this.tasks=[],this.pagination.total=0}finally{this.isLoading=!1,this.selectedTasks=[]}},getSerialNumber(s){return(this.pagination.currentPage-1)*this.pagination.pageSize+s+1},toggleTaskSelection(s){const t=this.selectedTasks.indexOf(s);t>-1?this.selectedTasks.splice(t,1):this.selectedTasks.push(s)},isTaskSelected(s){return this.selectedTasks.includes(s)},toggleSelectAll(){this.isAllSelected?this.selectedTasks=[]:this.selectedTasks=this.tasks.map(s=>s.task_id)},async batchDeleteTasks(){if(this.selectedTasks.length===0){g.warning("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„ä»»åŠ¡");return}if(!confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${this.selectedTasks.length} ä¸ªä»»åŠ¡å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))return;this.isDeleting=!0;let s=0,t=0;try{for(const a of this.selectedTasks)try{await c.delete(`/requirement-analysis/api/testcase-generation/${a}/`),s++}catch(n){console.error(`åˆ é™¤ä»»åŠ¡ ${a} å¤±è´¥:`,n),t++}s>0?g.success(`æˆåŠŸåˆ é™¤ ${s} ä¸ªä»»åŠ¡${t>0?`ï¼Œ${t} ä¸ªå¤±è´¥`:""}`):g.error("åˆ é™¤å¤±è´¥"),this.selectedTasks=[],this.loadTasks()}catch(a){console.error("æ‰¹é‡åˆ é™¤å¤±è´¥:",a),g.error("æ‰¹é‡åˆ é™¤å¤±è´¥: "+(a.message||"æœªçŸ¥é”™è¯¯"))}finally{this.isDeleting=!1}},updateStats(){this.loadAllStats()},async loadAllStats(){try{let s="/requirement-analysis/api/testcase-generation/";const t=new URLSearchParams;t.append("page_size","10000"),t.append("page","1"),this.selectedStatus&&t.append("status",this.selectedStatus),s+="?"+t.toString();const a=await c.get(s),n=a.data.results||a.data||[];this.allStats.total=n.length,this.allStats.completed=n.filter(l=>l.status==="completed").length,this.allStats.running=n.filter(l=>["pending","generating","reviewing"].includes(l.status)).length,this.allStats.failed=n.filter(l=>l.status==="failed").length}catch(s){console.error("è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥:",s),this.allStats.total=this.pagination.total||0,this.allStats.completed=0,this.allStats.running=0,this.allStats.failed=0}},getStatusText(s){return{pending:"éœ€æ±‚åˆ†æä¸­",generating:"ç”¨ä¾‹ç¼–å†™ä¸­",reviewing:"ç”¨ä¾‹è¯„å®¡ä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"}[s]||s},getTestCaseCount(s){if(!s.final_test_cases)return 0;const a=s.final_test_cases.split(`
`).filter(i=>i.trim());let n=0,l=!0,o=!1;for(let i of a)if(i.includes("|")&&!i.includes("--------")&&i.split("|").map(h=>h.trim()).filter(h=>h).length>1){if(l&&(l=!1,i.includes("æµ‹è¯•ç”¨ä¾‹ç¼–å·")||i.includes("ID")||i.includes("ç”¨ä¾‹ID")||i.includes("åœºæ™¯")||i.includes("æ­¥éª¤"))){o=!0;continue}n++,n>=1&&(o=!0)}if(o&&n>0)return n;let T=0;for(const i of a)(i.includes("æµ‹è¯•ç”¨ä¾‹")||i.includes("Test Case")||i.match(/^(\d+\.|æµ‹è¯•åœºæ™¯)/))&&T++;return T||0},viewTaskDetail(s){if(["pending","generating","reviewing"].includes(s.status)){g.info("ç”¨ä¾‹æ­£åœ¨ç”Ÿæˆä¸­ï¼Œè¯·ç¨åæŸ¥çœ‹ï¼");return}if(s.status==="completed"){const t=this.$router.resolve({name:"TaskDetail",params:{taskId:s.task_id}}).href;window.open(t,"_blank")}},async batchAdoptTask(s){var t,a;if(confirm(`ç¡®å®šè¦ä¸€é”®é‡‡çº³ä»»åŠ¡"${s.title}"çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿ`))try{await c.post(`/requirement-analysis/api/testcase-generation/${s.task_id}/batch_adopt/`),g.success("ä¸€é”®é‡‡çº³æˆåŠŸï¼æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²å¯¼å…¥åˆ°æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨"),this.loadTasks()}catch(n){console.error("ä¸€é”®é‡‡çº³å¤±è´¥:",n),g.error("ä¸€é”®é‡‡çº³å¤±è´¥: "+(((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||n.message))}},async batchDiscardTask(s){var t,a;if(confirm(`ç¡®å®šè¦ä¸€é”®å¼ƒç”¨ä»»åŠ¡"${s.title}"çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{await c.post(`/requirement-analysis/api/testcase-generation/${s.task_id}/batch_discard/`),g.success("ä¸€é”®å¼ƒç”¨æˆåŠŸï¼è¯¥ä»»åŠ¡çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²åˆ é™¤"),this.loadTasks()}catch(n){console.error("ä¸€é”®å¼ƒç”¨å¤±è´¥:",n),g.error("ä¸€é”®å¼ƒç”¨å¤±è´¥: "+(((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||n.message))}},formatDateTime(s){return s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""},async fetchProjects(){try{const s=await c.get("/projects/list/");this.projects=s.data.results||[]}catch(s){console.error("è·å–é¡¹ç›®åˆ—è¡¨å¤±è´¥:",s)}},async fetchAllVersions(){try{const s=await c.get("/versions/");this.allVersions=s.data.results||s.data||[]}catch(s){console.error("è·å–æ‰€æœ‰ç‰ˆæœ¬åˆ—è¡¨å¤±è´¥:",s),this.allVersions=[]}},async fetchProjectVersions(s){if(!s){this.projectVersions=[];return}try{const t=await c.get(`/versions/projects/${s}/versions/`);this.projectVersions=t.data||[]}catch(t){console.error("è·å–é¡¹ç›®ç‰ˆæœ¬å¤±è´¥:",t),this.projectVersions=[]}},async adoptTestCase(s){this.currentAdoptingTestCase=s,this.adoptForm={title:s.title,description:s.title,project_id:null,priority:"low",test_type:"functional",status:"draft",preconditions:s.precondition||"",steps:s.test_steps||"",expected_result:s.expected_result||"",version_id:null},this.showAdoptModal=!0},async onAdoptProjectChange(){this.adoptForm.project_id?(await this.fetchProjectVersions(this.adoptForm.project_id),this.adoptForm.version_id&&(this.projectVersions.some(t=>t.id===this.adoptForm.version_id)||(this.adoptForm.version_id=null))):this.projectVersions=[]},async confirmAdopt(){if(!this.adoptForm.project_id){alert("è¯·é€‰æ‹©å½’å±é¡¹ç›®");return}if(!this.adoptForm.version_id){alert("è¯·é€‰æ‹©å…³è”ç‰ˆæœ¬");return}if(!this.adoptForm.title.trim()){alert("è¯·è¾“å…¥ç”¨ä¾‹æ ‡é¢˜");return}if(!this.adoptForm.expected_result.trim()){alert("è¯·è¾“å…¥é¢„æœŸç»“æœ");return}this.isAdopting=!0;try{const s={...this.adoptForm};s.priority||(s.priority="low"),s.version_id&&(s.version_ids=[s.version_id]),delete s.version_id,await c.post("/testcases/",s);try{await c.patch(`/requirement-analysis/api/test-cases/${this.currentAdoptingTestCase.id}/`,{status:"adopted"})}catch(t){console.warn("æ›´æ–°AIç”¨ä¾‹çŠ¶æ€å¤±è´¥:",t)}alert("ç”¨ä¾‹é‡‡çº³æˆåŠŸï¼å·²å¯¼å…¥åˆ°æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨"),this.closeAdoptModal(),this.loadTestCases()}catch(s){console.error("é‡‡çº³ç”¨ä¾‹å¤±è´¥:",s),alert("é‡‡çº³ç”¨ä¾‹å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{this.isAdopting=!1}},async discardTestCase(s){if(confirm(`ç¡®å®šè¦å¼ƒç”¨æµ‹è¯•ç”¨ä¾‹"${s.title}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{await c.patch(`/requirement-analysis/api/test-cases/${s.id}/`,{status:"discarded"}),alert("ç”¨ä¾‹å·²å¼ƒç”¨"),this.loadTestCases()}catch(t){console.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥:",t),alert("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥ï¼Œè¯·é‡è¯•")}},closeAdoptModal(){this.showAdoptModal=!1,this.currentAdoptingTestCase=null,this.projectVersions=[]},getProjectName(s){const t=this.projects.find(a=>a.id===s);return t?t.name:""},onPageSizeChange(){this.pagination.currentPage=1,this.loadTasks()},goToPage(s){s>=1&&s<=this.totalPages&&(this.pagination.currentPage=s,this.loadTasks())},jumpToPage(){const s=parseInt(this.jumpPage);s>=1&&s<=this.totalPages?(this.pagination.currentPage=s,this.jumpPage="",this.loadTasks()):alert(`è¯·è¾“å…¥ 1-${this.totalPages} ä¹‹é—´çš„é¡µç `)},getVisiblePages(){const s=this.pagination.currentPage,t=this.totalPages,a=[];if(t<=7)for(let n=1;n<=t;n++)a.push(n);else if(s<=4){for(let n=1;n<=5;n++)a.push(n);a.push("..."),a.push(t)}else if(s>=t-3){a.push(1),a.push("...");for(let n=t-4;n<=t;n++)a.push(n)}else{a.push(1),a.push("...");for(let n=s-1;n<=s+1;n++)a.push(n);a.push("..."),a.push(t)}return a}}},M={class:"generated-testcase-list"},L={class:"filters-section"},z={class:"filter-card"},U={class:"filter-group"},I={class:"filter-actions"},q=["disabled"],x={key:0},N={key:1},E=["disabled"],B={key:0},G={key:1},H={key:0,class:"stats-section"},O={class:"stats-card"},R={class:"stat-item"},K={class:"stat-number"},J={class:"stat-item"},Q={class:"stat-number"},W={class:"stat-item"},X={class:"stat-number"},Y={class:"stat-item"},Z={class:"stat-number"},$={class:"testcases-section"},tt={key:0,class:"loading-state"},et={key:1,class:"empty-state"},st={key:2,class:"testcases-table"},it={class:"table-header"},lt={class:"header-cell checkbox-cell"},ot=["checked"],at={class:"table-body"},nt={class:"body-cell checkbox-cell"},rt=["checked","onChange"],dt={class:"body-cell serial-cell"},pt={class:"body-cell"},ut={class:"body-cell"},ct={class:"requirement-name"},gt={class:"body-cell"},mt={class:"body-cell count-cell"},ht={class:"count-badge"},vt={class:"body-cell"},ft={class:"body-cell"},bt={class:"action-buttons"},_t=["onClick"],kt=["onClick"],yt=["onClick"],Tt={key:1,class:"pagination-section"},Ct={class:"pagination-info"},St={class:"pagination-controls"},wt={class:"page-size-selector"},Pt=["value"],At={class:"pagination-buttons"},Dt=["disabled"],jt={class:"page-numbers"},Ft=["onClick"],Vt={key:1,class:"ellipsis"},Mt=["disabled"],Lt={class:"page-jumper"},zt=["max"],Ut={class:"modal-header"},It={class:"modal-body"},qt={class:"detail-item"},xt={class:"detail-item"},Nt={class:"detail-item"},Et={class:"detail-item"},Bt={class:"detail-item"},Gt={class:"detail-item"},Ht=["innerHTML"],Ot={class:"detail-item"},Rt=["innerHTML"],Kt={key:0,class:"detail-item"},Jt={class:"detail-item"},Qt={key:1,class:"detail-item"},Wt={class:"detail-item"},Xt={class:"modal-header"},Yt={class:"modal-body"},Zt={class:"adopt-form"},$t={class:"form-row"},te={class:"form-group"},ee={class:"form-row"},se={class:"form-group"},ie={class:"form-row"},le={class:"form-group"},oe=["value"],ae={class:"form-group"},ne=["value"],re={class:"form-hint"},de={class:"form-row"},pe={class:"form-group"},ue={class:"form-group"},ce={class:"form-row"},ge={class:"form-group"},me={class:"form-row"},he={class:"form-group"},ve={class:"form-row"},fe={class:"form-group"},be={class:"form-row"},_e={class:"form-group"},ke={class:"form-actions"},ye=["disabled"];function Te(s,t,a,n,l,o){const T=A("router-link");return d(),p("div",M,[t[73]||(t[73]=e("div",{class:"page-header"},[e("h2",null,"AIç”Ÿæˆç”¨ä¾‹è®°å½•")],-1)),e("div",L,[e("div",z,[e("div",U,[t[32]||(t[32]=e("label",null,"çŠ¶æ€ç­›é€‰:",-1)),u(e("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>l.selectedStatus=i),onChange:t[1]||(t[1]=(...i)=>o.loadTasks&&o.loadTasks(...i)),class:"filter-select"},t[31]||(t[31]=[S('<option value="" data-v-0f71423a>å…¨éƒ¨çŠ¶æ€</option><option value="pending" data-v-0f71423a>éœ€æ±‚åˆ†æä¸­</option><option value="generating" data-v-0f71423a>ç”¨ä¾‹ç¼–å†™ä¸­</option><option value="reviewing" data-v-0f71423a>ç”¨ä¾‹è¯„å®¡ä¸­</option><option value="completed" data-v-0f71423a>å·²å®Œæˆ</option><option value="failed" data-v-0f71423a>å¤±è´¥</option>',6)]),544),[[v,l.selectedStatus]])]),e("div",I,[l.selectedTasks.length>0?(d(),p("button",{key:0,class:"batch-delete-btn",onClick:t[2]||(t[2]=(...i)=>o.batchDeleteTasks&&o.batchDeleteTasks(...i)),disabled:l.isDeleting},[l.isDeleting?(d(),p("span",x,"ğŸ—‘ï¸ åˆ é™¤ä¸­...")):(d(),p("span",N,"ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤ ("+r(l.selectedTasks.length)+")",1))],8,q)):m("",!0),e("button",{class:"refresh-btn",onClick:t[3]||(t[3]=(...i)=>o.loadTasks&&o.loadTasks(...i)),disabled:l.isLoading},[l.isLoading?(d(),p("span",B,"ğŸ”„ åŠ è½½ä¸­...")):(d(),p("span",G,"ğŸ”„ åˆ·æ–°"))],8,E)])])]),l.allStats.total>0?(d(),p("div",H,[e("div",O,[e("div",R,[e("span",K,r(l.allStats.total),1),t[33]||(t[33]=e("span",{class:"stat-label"},"ä»»åŠ¡æ€»æ•°",-1))]),e("div",J,[e("span",Q,r(l.allStats.completed),1),t[34]||(t[34]=e("span",{class:"stat-label"},"å·²å®Œæˆ",-1))]),e("div",W,[e("span",X,r(l.allStats.running),1),t[35]||(t[35]=e("span",{class:"stat-label"},"è¿›è¡Œä¸­",-1))]),e("div",Y,[e("span",Z,r(l.allStats.failed),1),t[36]||(t[36]=e("span",{class:"stat-label"},"å¤±è´¥",-1))])])])):m("",!0),e("div",$,[l.isLoading?(d(),p("div",tt,t[37]||(t[37]=[e("p",null,"ğŸ”„ æ­£åœ¨åŠ è½½ä»»åŠ¡åˆ—è¡¨...",-1)]))):l.tasks.length===0?(d(),p("div",et,[t[41]||(t[41]=e("div",{class:"empty-icon"},"ğŸ“",-1)),t[42]||(t[42]=e("h3",null,"æš‚æ— ç”Ÿæˆä»»åŠ¡",-1)),e("p",null,[t[39]||(t[39]=b("è¿˜æ²¡æœ‰AIç”Ÿæˆç”¨ä¾‹ä»»åŠ¡ï¼Œå»",-1)),D(T,{to:"/requirement-analysis"},{default:j(()=>t[38]||(t[38]=[b("AIç”¨ä¾‹ç”Ÿæˆ",-1)])),_:1,__:[38]}),t[40]||(t[40]=b("é¡µé¢åˆ›å»ºä¸€ä¸ªä»»åŠ¡å§ï¼",-1))])])):(d(),p("div",st,[e("div",it,[e("div",lt,[e("input",{type:"checkbox",onChange:t[4]||(t[4]=(...i)=>o.toggleSelectAll&&o.toggleSelectAll(...i)),checked:o.isAllSelected,class:"task-checkbox"},null,40,ot)]),t[43]||(t[43]=S('<div class="header-cell serial-cell" data-v-0f71423a>åºå·</div><div class="header-cell" data-v-0f71423a>ä»»åŠ¡ID</div><div class="header-cell" data-v-0f71423a>å…³è”éœ€æ±‚</div><div class="header-cell" data-v-0f71423a>çŠ¶æ€</div><div class="header-cell count-cell" data-v-0f71423a>ç”¨ä¾‹æ¡æ•°</div><div class="header-cell" data-v-0f71423a>ç”Ÿæˆæ—¶é—´</div><div class="header-cell" data-v-0f71423a>æ“ä½œ</div>',7))]),e("div",at,[(d(!0),p(_,null,k(l.tasks,(i,C)=>(d(),p("div",{key:i.task_id,class:y(["table-row",{selected:o.isTaskSelected(i.task_id)}])},[e("div",nt,[e("input",{type:"checkbox",checked:o.isTaskSelected(i.task_id),onChange:h=>o.toggleTaskSelection(i.task_id),class:"task-checkbox"},null,40,rt)]),e("div",dt,r(o.getSerialNumber(C)),1),e("div",pt,r(i.task_id),1),e("div",ut,[e("span",ct,r(i.title),1)]),e("div",gt,[e("span",{class:y(["status-tag",i.status])},r(o.getStatusText(i.status)),3)]),e("div",mt,[e("span",ht,r(o.getTestCaseCount(i)),1)]),e("div",vt,r(o.formatDateTime(i.created_at)),1),e("div",ft,[e("div",bt,[e("button",{class:"view-detail-btn",onClick:h=>o.viewTaskDetail(i)}," ğŸ“– æŸ¥çœ‹è¯¦æƒ… ",8,_t),i.status==="completed"?(d(),p("button",{key:0,class:"adopt-btn",onClick:h=>o.batchAdoptTask(i)}," âœ… ä¸€é”®é‡‡çº³ ",8,kt)):m("",!0),i.status==="completed"?(d(),p("button",{key:1,class:"discard-btn",onClick:h=>o.batchDiscardTask(i)}," âŒ ä¸€é”®å¼ƒç”¨ ",8,yt)):m("",!0)])])],2))),128))])]))]),l.tasks.length>0?(d(),p("div",Tt,[e("div",Ct,r(o.paginationInfo),1),e("div",St,[e("div",wt,[t[44]||(t[44]=e("label",null,"æ¯é¡µæ˜¾ç¤ºï¼š",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=i=>l.pagination.pageSize=i),onChange:t[6]||(t[6]=(...i)=>o.onPageSizeChange&&o.onPageSizeChange(...i))},[(d(!0),p(_,null,k(l.pagination.pageSizeOptions,i=>(d(),p("option",{key:i,value:i},r(i)+" æ¡ ",9,Pt))),128))],544),[[v,l.pagination.pageSize]])]),e("div",At,[e("button",{class:"page-btn",disabled:l.pagination.currentPage<=1,onClick:t[7]||(t[7]=i=>o.goToPage(l.pagination.currentPage-1))}," ä¸Šä¸€é¡µ ",8,Dt),e("div",jt,[(d(!0),p(_,null,k(o.getVisiblePages(),i=>(d(),p("span",{key:i,class:"page-number"},[i!=="..."?(d(),p("button",{key:0,class:y(["page-btn",{active:i===l.pagination.currentPage}]),onClick:C=>o.goToPage(i)},r(i),11,Ft)):(d(),p("span",Vt,"..."))]))),128))]),e("button",{class:"page-btn",disabled:l.pagination.currentPage>=o.totalPages,onClick:t[8]||(t[8]=i=>o.goToPage(l.pagination.currentPage+1))}," ä¸‹ä¸€é¡µ ",8,Mt)]),e("div",Lt,[t[45]||(t[45]=e("label",null,"è·³è½¬åˆ°ï¼š",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>l.jumpPage=i),type:"number",min:1,max:o.totalPages,onKeyup:t[10]||(t[10]=F((...i)=>o.jumpToPage&&o.jumpToPage(...i),["enter"])),placeholder:"é¡µç "},null,40,zt),[[f,l.jumpPage]]),e("button",{class:"jump-btn",onClick:t[11]||(t[11]=(...i)=>o.jumpToPage&&o.jumpToPage(...i))},"è·³è½¬")])])])):m("",!0),s.selectedTestCaseDetail?(d(),p("div",{key:2,class:"testcase-detail-modal",onClick:t[14]||(t[14]=(...i)=>s.closeTestCaseDetail&&s.closeTestCaseDetail(...i))},[e("div",{class:"modal-content",onClick:t[13]||(t[13]=w(()=>{},["stop"]))},[e("div",Ut,[e("h3",null,r(s.selectedTestCaseDetail.title),1),e("button",{class:"close-btn",onClick:t[12]||(t[12]=(...i)=>s.closeTestCaseDetail&&s.closeTestCaseDetail(...i))},"Ã—")]),e("div",It,[e("div",qt,[t[46]||(t[46]=e("label",null,"ç”¨ä¾‹ç¼–å·:",-1)),e("span",null,r(s.selectedTestCaseDetail.case_id),1)]),e("div",xt,[t[47]||(t[47]=e("label",null,"å…³è”éœ€æ±‚:",-1)),e("span",null,r(s.selectedTestCaseDetail.requirement_name)+" ("+r(s.selectedTestCaseDetail.requirement_id_display)+")",1)]),e("div",Nt,[t[48]||(t[48]=e("label",null,"ä¼˜å…ˆçº§:",-1)),e("span",{class:y(["priority-tag",s.selectedTestCaseDetail.priority.toLowerCase()])},r(s.selectedTestCaseDetail.priority_display),3)]),e("div",Et,[t[49]||(t[49]=e("label",null,"çŠ¶æ€:",-1)),e("span",{class:y(["status-tag",s.selectedTestCaseDetail.status])},r(s.selectedTestCaseDetail.status_display),3)]),e("div",Bt,[t[50]||(t[50]=e("label",null,"å‰ç½®æ¡ä»¶:",-1)),e("p",null,r(s.selectedTestCaseDetail.precondition),1)]),e("div",Gt,[t[51]||(t[51]=e("label",null,"æµ‹è¯•æ­¥éª¤:",-1)),e("p",{class:"test-steps",innerHTML:s.selectedTestCaseDetail.test_steps},null,8,Ht)]),e("div",Ot,[t[52]||(t[52]=e("label",null,"é¢„æœŸç»“æœ:",-1)),e("p",{innerHTML:s.selectedTestCaseDetail.expected_result},null,8,Rt)]),s.selectedTestCaseDetail.review_comments?(d(),p("div",Kt,[t[53]||(t[53]=e("label",null,"è¯„å®¡æ„è§:",-1)),e("p",null,r(s.selectedTestCaseDetail.review_comments),1)])):m("",!0),e("div",Jt,[t[54]||(t[54]=e("label",null,"ç”ŸæˆAI:",-1)),e("span",null,r(s.selectedTestCaseDetail.generated_by_ai),1)]),s.selectedTestCaseDetail.reviewed_by_ai?(d(),p("div",Qt,[t[55]||(t[55]=e("label",null,"è¯„å®¡AI:",-1)),e("span",null,r(s.selectedTestCaseDetail.reviewed_by_ai),1)])):m("",!0),e("div",Wt,[t[56]||(t[56]=e("label",null,"ç”Ÿæˆæ—¶é—´:",-1)),e("span",null,r(o.formatDateTime(s.selectedTestCaseDetail.created_at)),1)])])])])):m("",!0),l.showAdoptModal?(d(),p("div",{key:3,class:"testcase-detail-modal",onClick:t[30]||(t[30]=(...i)=>o.closeAdoptModal&&o.closeAdoptModal(...i))},[e("div",{class:"modal-content large-modal",onClick:t[29]||(t[29]=w(()=>{},["stop"]))},[e("div",Xt,[t[57]||(t[57]=e("h3",null,"é‡‡çº³æµ‹è¯•ç”¨ä¾‹",-1)),e("button",{class:"close-btn",onClick:t[15]||(t[15]=(...i)=>o.closeAdoptModal&&o.closeAdoptModal(...i))},"Ã—")]),e("div",Yt,[e("form",Zt,[e("div",$t,[e("div",te,[t[58]||(t[58]=e("label",null,"ç”¨ä¾‹æ ‡é¢˜:",-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=i=>l.adoptForm.title=i),type:"text",placeholder:"è¯·è¾“å…¥ç”¨ä¾‹æ ‡é¢˜"},null,512),[[f,l.adoptForm.title]])])]),e("div",ee,[e("div",se,[t[59]||(t[59]=e("label",null,"ç”¨ä¾‹æè¿°:",-1)),u(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=i=>l.adoptForm.description=i),rows:"3",placeholder:"è¯·è¾“å…¥ç”¨ä¾‹æè¿°"},null,512),[[f,l.adoptForm.description]])])]),e("div",ie,[e("div",le,[t[61]||(t[61]=e("label",null,[b("å½’å±é¡¹ç›®: "),e("span",{class:"required"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[18]||(t[18]=i=>l.adoptForm.project_id=i),onChange:t[19]||(t[19]=(...i)=>o.onAdoptProjectChange&&o.onAdoptProjectChange(...i))},[t[60]||(t[60]=e("option",{value:""},"è¯·é€‰æ‹©é¡¹ç›®",-1)),(d(!0),p(_,null,k(l.projects,i=>(d(),p("option",{key:i.id,value:i.id},r(i.name),9,oe))),128))],544),[[v,l.adoptForm.project_id]])]),e("div",ae,[t[63]||(t[63]=e("label",null,[b("å…³è”ç‰ˆæœ¬: "),e("span",{class:"required"},"*")],-1)),u(e("select",{"onUpdate:modelValue":t[20]||(t[20]=i=>l.adoptForm.version_id=i)},[t[62]||(t[62]=e("option",{value:""},"è¯·é€‰æ‹©ç‰ˆæœ¬",-1)),(d(!0),p(_,null,k(o.availableVersions,i=>(d(),p("option",{key:i.id,value:i.id},r(i.name)+r(i.is_baseline?" (åŸºçº¿)":""),9,ne))),128))],512),[[v,l.adoptForm.version_id]]),e("small",re,r(l.adoptForm.project_id?`æ˜¾ç¤ºé¡¹ç›®"${o.getProjectName(l.adoptForm.project_id)}"çš„ç‰ˆæœ¬`:"æ˜¾ç¤ºæ‰€æœ‰ç‰ˆæœ¬ï¼Œé€‰æ‹©é¡¹ç›®åå°†è¿‡æ»¤ä¸ºé¡¹ç›®ç‰ˆæœ¬"),1)])]),e("div",de,[e("div",pe,[t[65]||(t[65]=e("label",null,"ä¼˜å…ˆçº§:",-1)),u(e("select",{"onUpdate:modelValue":t[21]||(t[21]=i=>l.adoptForm.priority=i)},t[64]||(t[64]=[e("option",{value:"low"},"ä½",-1),e("option",{value:"medium"},"ä¸­",-1),e("option",{value:"high"},"é«˜",-1),e("option",{value:"critical"},"ç´§æ€¥",-1)]),512),[[v,l.adoptForm.priority]])]),e("div",ue,[t[67]||(t[67]=e("label",null,"æµ‹è¯•ç±»å‹:",-1)),u(e("select",{"onUpdate:modelValue":t[22]||(t[22]=i=>l.adoptForm.test_type=i)},t[66]||(t[66]=[S('<option value="functional" data-v-0f71423a>åŠŸèƒ½æµ‹è¯•</option><option value="integration" data-v-0f71423a>é›†æˆæµ‹è¯•</option><option value="api" data-v-0f71423a>APIæµ‹è¯•</option><option value="ui" data-v-0f71423a>UIæµ‹è¯•</option><option value="performance" data-v-0f71423a>æ€§èƒ½æµ‹è¯•</option><option value="security" data-v-0f71423a>å®‰å…¨æµ‹è¯•</option>',6)]),512),[[v,l.adoptForm.test_type]])])]),e("div",ce,[e("div",ge,[t[69]||(t[69]=e("label",null,"çŠ¶æ€:",-1)),u(e("select",{"onUpdate:modelValue":t[23]||(t[23]=i=>l.adoptForm.status=i)},t[68]||(t[68]=[e("option",{value:"draft"},"è‰ç¨¿",-1),e("option",{value:"active"},"æ¿€æ´»",-1)]),512),[[v,l.adoptForm.status]])])]),e("div",me,[e("div",he,[t[70]||(t[70]=e("label",null,"å‰ç½®æ¡ä»¶:",-1)),u(e("textarea",{"onUpdate:modelValue":t[24]||(t[24]=i=>l.adoptForm.preconditions=i),rows:"3",placeholder:"è¯·è¾“å…¥å‰ç½®æ¡ä»¶"},null,512),[[f,l.adoptForm.preconditions]])])]),e("div",ve,[e("div",fe,[t[71]||(t[71]=e("label",null,"æ“ä½œæ­¥éª¤:",-1)),u(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=i=>l.adoptForm.steps=i),rows:"6",placeholder:"è¯·è¾“å…¥è¯¦ç»†çš„æ“ä½œæ­¥éª¤"},null,512),[[f,l.adoptForm.steps]])])]),e("div",be,[e("div",_e,[t[72]||(t[72]=e("label",null,"é¢„æœŸç»“æœ:",-1)),u(e("textarea",{"onUpdate:modelValue":t[26]||(t[26]=i=>l.adoptForm.expected_result=i),rows:"3",placeholder:"è¯·è¾“å…¥é¢„æœŸç»“æœ"},null,512),[[f,l.adoptForm.expected_result]])])]),e("div",ke,[e("button",{type:"button",class:"confirm-btn",onClick:t[27]||(t[27]=(...i)=>o.confirmAdopt&&o.confirmAdopt(...i)),disabled:l.isAdopting},r(l.isAdopting?"æ­£åœ¨é‡‡çº³...":"ç¡®è®¤é‡‡çº³"),9,ye),e("button",{type:"button",class:"cancel-btn",onClick:t[28]||(t[28]=(...i)=>o.closeAdoptModal&&o.closeAdoptModal(...i))},"å–æ¶ˆ")])])])])])):m("",!0)])}const Se=P(V,[["render",Te],["__scopeId","data-v-0f71423a"]]);export{Se as default};
